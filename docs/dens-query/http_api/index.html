<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/DeNS/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/DeNS/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/DeNS/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/DeNS/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/DeNS/favicons/android-192x192.png" sizes="192x192">

<title>HTTP API | DeNS</title>
<meta name="description" content="DeNS Query provides an HTTP interface for accessing the UTxOs stored in the database.
Authentication Some endpoints provided by DeNS Query are exposed internal functionalities to and are made available to facilitate testing and development.
Important To prevent malicious interactions/modifications of DeNS Query’s database, it is therefore expected that these endpoints must NOT be exposed publicly (i.e., not accessible to end-users). For this to be effective, a HTTPS reverse proxy may be used to:">
<meta property="og:title" content="HTTP API" />
<meta property="og:description" content="DeNS Query provides an HTTP interface for accessing the UTxOs stored in the database.
Authentication Some endpoints provided by DeNS Query are exposed internal functionalities to and are made available to facilitate testing and development.
Important To prevent malicious interactions/modifications of DeNS Query’s database, it is therefore expected that these endpoints must NOT be exposed publicly (i.e., not accessible to end-users). For this to be effective, a HTTPS reverse proxy may be used to:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mlabs-haskell.github.io/DeNS/docs/dens-query/http_api/" /><meta property="article:section" content="docs" />


<meta itemprop="name" content="HTTP API">
<meta itemprop="description" content="DeNS Query provides an HTTP interface for accessing the UTxOs stored in the database.
Authentication Some endpoints provided by DeNS Query are exposed internal functionalities to and are made available to facilitate testing and development.
Important To prevent malicious interactions/modifications of DeNS Query’s database, it is therefore expected that these endpoints must NOT be exposed publicly (i.e., not accessible to end-users). For this to be effective, a HTTPS reverse proxy may be used to:">

<meta itemprop="wordCount" content="738">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="HTTP API"/>
<meta name="twitter:description" content="DeNS Query provides an HTTP interface for accessing the UTxOs stored in the database.
Authentication Some endpoints provided by DeNS Query are exposed internal functionalities to and are made available to facilitate testing and development.
Important To prevent malicious interactions/modifications of DeNS Query’s database, it is therefore expected that these endpoints must NOT be exposed publicly (i.e., not accessible to end-users). For this to be effective, a HTTPS reverse proxy may be used to:"/>




<link rel="preload" href="/DeNS/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" as="style">
<link href="/DeNS/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/DeNS/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">DeNS</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/DeNS/offline-search-index.b4e9f3f55975d44130cdfe39349481c2.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/DeNS/offline-search-index.b4e9f3f55975d44130cdfe39349481c2.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-densdocs-li">
  <a href="/DeNS/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-densdocs"><span class="">DeNS</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-densdocsarchitecture-li">
  <a href="/DeNS/docs/architecture/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-densdocsarchitecture"><span class="">Design &amp; Architecture</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsarchitecturearchitecture-li">
  <a href="/DeNS/docs/architecture/architecture/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsarchitecturearchitecture"><span class="">Technical Specification</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-densdocsdens-query-li">
  <a href="/DeNS/docs/dens-query/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-densdocsdens-query"><span class="">DeNS Query</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-querygetting_started-li">
  <a href="/DeNS/docs/dens-query/getting_started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-querygetting_started"><span class="">Getting Started</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-densdocsdens-queryhttp_api-li">
  <a href="/DeNS/docs/dens-query/http_api/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-queryhttp_api"><span class="td-sidebar-nav-active-item">HTTP API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-querydatabase_schema-li">
  <a href="/DeNS/docs/dens-query/database_schema/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-querydatabase_schema"><span class="">Database Schema</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-queryreadme-li">
  <a href="/DeNS/docs/dens-query/readme/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-queryreadme"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-densdocsdens-transactions-li">
  <a href="/DeNS/docs/dens-transactions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-densdocsdens-transactions"><span class="">DeNS Transactions</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-transactionsgetting_started-li">
  <a href="/DeNS/docs/dens-transactions/getting_started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-transactionsgetting_started"><span class="">Getting Started</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-transactionsinit-li">
  <a href="/DeNS/docs/dens-transactions/init/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-transactionsinit"><span class="">Initialization</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-transactionsregister_domain-li">
  <a href="/DeNS/docs/dens-transactions/register_domain/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-transactionsregister_domain"><span class="">Register a Domain</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-transactionsupdate_record-li">
  <a href="/DeNS/docs/dens-transactions/update_record/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-transactionsupdate_record"><span class="">Update a Record</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-transactionsreadme-li">
  <a href="/DeNS/docs/dens-transactions/readme/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-transactionsreadme"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-densdocsdens-pdns-backend-li">
  <a href="/DeNS/docs/dens-pdns-backend/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-densdocsdens-pdns-backend"><span class="">DeNS PowerDNS Integration</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-pdns-backendgetting_started-li">
  <a href="/DeNS/docs/dens-pdns-backend/getting_started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-pdns-backendgetting_started"><span class="">Getting Started</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocsdens-pdns-backendreadme-li">
  <a href="/DeNS/docs/dens-pdns-backend/readme/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocsdens-pdns-backendreadme"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-densdocscatalyst-reports-li">
  <a href="/DeNS/docs/catalyst-reports/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-densdocscatalyst-reports"><span class="">Catalyst reports</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocscatalyst-reportsmilestone-3-li">
  <a href="/DeNS/docs/catalyst-reports/milestone-3/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocscatalyst-reportsmilestone-3"><span class="">Milestone 3</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocscatalyst-reportsmilestone-4-li">
  <a href="/DeNS/docs/catalyst-reports/milestone-4/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocscatalyst-reportsmilestone-4"><span class="">Milestone 4</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-densdocscatalyst-reportsfinal-milestone-li">
  <a href="/DeNS/docs/catalyst-reports/final-milestone/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-densdocscatalyst-reportsfinal-milestone"><span class="">Final Milestone</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#_authentication">Authentication</a></li>
    <li><a href="#http-endpoints">HTTP Endpoints</a>
      <ul>
        <li><a href="#query-set-insertion-utxo">POST Query Set Insertion UTxO</a></li>
        <li><a href="#query-protocol-utxo">POST Protocol UTxO</a></li>
        <li><a href="#set-protocol-nft">POST Set Protocol NFT</a></li>
      </ul>
    </li>
    <li><a href="#_lambdabuffers">LambdaBuffers</a></li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/DeNS/docs/">DeNS</a></li>
  <li class="breadcrumb-item">
    <a href="/DeNS/docs/dens-query/">DeNS Query</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    HTTP API</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>HTTP API</h1>
	
	<header class="article-meta">
		
</header>
	
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>DeNS Query provides an HTTP interface for accessing the UTxOs stored in the database.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication">Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some endpoints provided by DeNS Query are exposed internal functionalities to
and are made available to facilitate testing and development.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>To prevent malicious interactions/modifications of DeNS Query’s database,
it is therefore expected that these endpoints must NOT be exposed publicly
(i.e., not accessible to end-users).
For this to be effective,
a HTTPS reverse proxy may be used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ensure that proper encryption is enforced;</p>
</li>
<li>
<p>guarantee host authentication; and</p>
</li>
<li>
<p>make sure that only user-specific endpoints are exposed for the public.</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Below is a list of these internal endpoints that should not be exposed in the public API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#set-protocol-nft">POST Set Protocol NFT</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http-endpoints">HTTP Endpoints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="query-set-insertion-utxo">POST Query Set Insertion UTxO</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Method</dt>
<dd>
<p><strong>POST</strong></p>
</dd>
<dt class="hdlist1">URL</dt>
<dd>
<p><code>/api/query-set-insertion-utxo</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns the UTxO to spend in order to purchase the given domain from the smart contracts.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="highlight"><code>{
    &#34;name&#34;: &#34;7461796C6F7273776966742E636F6D&#34; <b class="conum">(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Hex encoded domain name one wishes to purchase</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="highlight"><code>{
    &#34;name&#34;: &#34;Ok&#34;,
    &#34;fields&#34;:
        [
            {
                &#34;name&#34;: &#34;676F6F676C652E636F6D&#34;, <b class="conum">(1)</b>
                &#34;pointer&#34;:                      <b class="conum">(2)</b>
                    {
                        &#34;currency_symbol&#34;:
                            &#34;0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F&#34;,
                        &#34;token_name&#34;: &#34;&#34;
                    },
                &#34;txOutRef&#34;:                     <b class="conum">(3)</b>
                    {
                        &#34;txOutRef&#34;:             <b class="conum">(4)</b>
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;,
                        &#34;txOutRefIx&#34;: 69        <b class="conum">(5)</b>
                    }
            }
        ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Hex encoded largest purchased domain name which is lexicograpically strictly less than the provided domain name.</p>
</li>
<li>
<p>Asset class which identifies the UTxOs of RRs</p>
</li>
<li>
<p>Transaction output that this information resides at</p>
</li>
<li>
<p>Hex encoded transaction hash</p>
</li>
<li>
<p>Integer index</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_errors">Errors</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#domain-name-already-exists">Domain name already exists error response</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thrown if the domain name to purchase has already been purchased</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#no-set-elements-found">No set elements found</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thrown if there are no UTxOs to spend in the set (most likely a misconfigured protocol)</p></td>
</tr>
</tbody>
</table>
<div id="domain-name-already-exists" class="listingblock">
<div class="title">Domain name already exists error response</div>
<div class="content">
<pre class="highlight"><code></code></pre>
</div>
</div>
<div id="no-set-elements-found" class="listingblock">
<div class="title">No set elements found</div>
<div class="content">
<pre class="highlight"><code></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="query-protocol-utxo">POST Protocol UTxO</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Method</dt>
<dd>
<p><strong>POST</strong></p>
</dd>
<dt class="hdlist1">URL</dt>
<dd>
<p><code>/api/query-protocol-utxo</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Returns the UTxO which holds the Protocol type i.e., trusted information of the DeNS protocol.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="highlight"><code>{ }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="highlight"><code>{
    &#34;name&#34;: &#34;Ok&#34;,
    &#34;fields&#34;:
        [
            {
                &#34;txOutRef&#34;:                     <b class="conum">(1)</b>
                    {
                        &#34;txOutRef&#34;:             <b class="conum">(2)</b>
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;,
                        &#34;txOutRefIx&#34;: 69        <b class="conum">(3)</b>
                    },
                &#34;protocol&#34;:                     <b class="conum">(4)</b>
                    {
                        &#34;elementIdMintingPolicy&#34;:
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;,
                        &#34;setElemMintingPolicy&#34; :
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;,
                        &#34;setValidator&#34;:
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;,
                        &#34;recordsValidator&#34;:
                            &#34;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#34;
                    }
            }
        ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Transaction output that this information resides at</p>
</li>
<li>
<p>Hex encoded transaction hash</p>
</li>
<li>
<p>Integer index</p>
</li>
<li>
<p>JSON object of hex encoded script hashes (28 bytes)</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_errors_2">Errors</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 33.3333%;"/>
<col style="width: 33.3334%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#no-protocol-utxo-found">No protocol utxo found</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thrown if there is no UTxO for the protocol</p></td>
</tr>
</tbody>
</table>
<div id="no-protocol-utxo-found" class="listingblock">
<div class="title">No protocol utxo found</div>
<div class="content">
<pre class="highlight"><code></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="set-protocol-nft">POST Set Protocol NFT</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Method</dt>
<dd>
<p><strong>POST</strong></p>
</dd>
<dt class="hdlist1">URL</dt>
<dd>
<p><code>/api/set-protocol-nft</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Sets the protocol NFT to the provided protocol NFT returning the new protocol NFT that DeNS Query now follows.
In other words,
recalling that all instances of the DeNS protocol are uniquely identified by a protocol NFT,
setting the protocol NFT to a new protocol NFT therefore changes the instance of the DeNS protocol that this DeNS Query server follows.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="highlight"><code>{
    &#34;protocolNft&#34;:
        {
            &#34;currency_symbol&#34;:
                &#34;0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F&#34;,
            &#34;token_name&#34;:
                &#34;&#34;
        }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="highlight"><code>{
    &#34;name&#34;: &#34;Ok&#34;,
    &#34;fields&#34;:
        [
            {
                &#34;protocolNft&#34;:
                    {
                        &#34;currency_symbol&#34;:
                            &#34;0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F&#34;,
                        &#34;token_name&#34;:
                            &#34;&#34;
                    }
            }
        ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lambdabuffers">LambdaBuffers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All datum described in the requests and responses in <a href="#http-endpoints">HTTP Endpoints</a> have an associated LambdaBuffers type with generated JSON parsers.
Details can be found in the LambdaBuffers schema file given below</p>
</div>
<div class="listingblock">
<div class="title">LambdaBuffers schema file</div>
<div class="content">
<pre class="highlight"><code>module Dens.Server

import Prelude   (Eq, Json, Text)
import Plutus.V1 (TxOutRef, AssetClass, Bytes)
import Dens.Db   (DensProtocolUtxo, DensSetUtxo)

---------------------------------------------------
-- Response type
---------------------------------------------------

sum Response a
    = Ok a
    | Failed ResponseFailed

record ResponseFailed = { error: Text }

derive Eq (Response a)
derive Json (Response a)

derive Eq ResponseFailed
derive Json ResponseFailed

---------------------------------------------------
-- Set insertion request / response
---------------------------------------------------
record QueryDensSetInsertionUtxoRequest = { name : Bytes }
prod QueryDensSetInsertionUtxoResponse = (Response DensSetUtxo)

derive Eq QueryDensSetInsertionUtxoRequest
derive Json QueryDensSetInsertionUtxoRequest

derive Eq QueryDensSetInsertionUtxoResponse
derive Json QueryDensSetInsertionUtxoResponse

---------------------------------------------------
-- Set query request / response
---------------------------------------------------
-- TODO(jaredponn): implementing this would be useful for updates, but we don&#39;t
-- support this now.
-- record QueryDensSettxoRequest = { name : Bytes }
-- prod QueryDensSetUtxoResponse = (Response DensSetUtxo)
-- 
-- derive Eq QueryDensSetUtxoRequest
-- derive Json QueryDensSetUtxoRequest
-- 
-- derive Eq QueryDensSetUtxoResponse
-- derive Json QueryDensSetUtxoResponse

---------------------------------------------------
-- Protocol info query / response
---------------------------------------------------
-- TODO(jaredponn): LB doesn&#39;t like JSON objects for empty records. I&#39;ll PR
-- this in LB.
-- record QueryDensProtocolUtxoRequest = { }
prod QueryDensProtocolUtxoResponse = (Response DensProtocolUtxo)

-- derive Eq QueryDensProtocolUtxoRequest
-- derive Json QueryDensProtocolUtxoRequest

derive Eq QueryDensProtocolUtxoResponse
derive Json QueryDensProtocolUtxoResponse

---------------------------------------------------
-- Set protocol NFT query /response
---------------------------------------------------
record SetProtocolNftRequest = { protocolNft: AssetClass }
prod   SetProtocolNftResponse = (Response SetProtocolNftRequest)

derive Eq SetProtocolNftRequest
derive Json SetProtocolNftRequest

derive Eq SetProtocolNftResponse
derive Json SetProtocolNftResponse</code></pre>
</div>
</div>
</div>
</div>

	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/DeNS/js/main.min.37d14e870feb76f0f7a2a2422bae231efb0186c477999a4ab9ca7e9924ced592.js" integrity="sha256-N9FOhw/rdvD3oqJCK64jHvsBhsR3mZpKucp&#43;mSTO1ZI=" crossorigin="anonymous"></script>
<script defer src="/DeNS/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/DeNS/js/tabpane-persist.js'></script>

  </body>
</html>